{"ast":null,"code":"import React,{useState}from'react';import Papa from'papaparse';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CSVImporter(_ref){let{onDataImported}=_ref;const[isLoading,setIsLoading]=useState(false);const[fileName,setFileName]=useState('');const handleFileUpload=event=>{const file=event.target.files[0];if(!file)return;setFileName(file.name);setIsLoading(true);Papa.parse(file,{header:true,// Utilise la première ligne comme en-têtes\nskipEmptyLines:true,complete:results=>{console.log('Données importées:',results.data);// Transformation des données pour correspondre à notre structure\nconst transformedData=results.data.map((row,index)=>({id:index+1,designation:row['Désignation']||row['DESIGNATION']||'',cmu:row['CMU']||'',modele:row['Modèle']||row['MODELE']||'',marque:row['Marque']||row['MARQUE']||'',longueur:row['Longeur Chaîne/Câble']||row['LONGUEUR']||'',infosComplementaires:row['Infos Complémentaires']||row['INFOS']||'',numeroSerie:row['Numéro de Série']||row['N° SERIE']||'',disponibilite:row['Disponibilité']||row['ETAT']||'Sur Parc',debutLocation:row['Début Location']||'',finLocationTheorique:row['Fin de Location Théorique']||'',rentreeLe:row['Rentré Le']||'',client:row['Client']||'',numeroOffre:row['N° OFFRE']||'',notesLocation:row['NOTES LOCATION']||'',prixHT:row['Prix HT/J']||'',etat:row['État']||'Moyen',motifMaintenance:row['Motif de Maintenance']||'',certificat:row['Certificat / V-TIC']||'',dernierVGP:row['Dernier VGP']||'',prochainVGP:row['Prochain VGP']||''}));onDataImported(transformedData);setIsLoading(false);},error:error=>{console.error('Erreur lors de l\\'import:',error);setIsLoading(false);alert('Erreur lors de l\\'import du fichier CSV');}});};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',backgroundColor:'white',borderRadius:'8px',boxShadow:'0 2px 4px rgba(0,0,0,0.1)',margin:'20px 0'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Importer votre fichier CSV\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#666',marginBottom:'15px'},children:\"S\\xE9lectionnez votre fichier CSV pour importer tous vos \\xE9quipements\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".csv\",onChange:handleFileUpload,style:{padding:'10px',border:'2px dashed #ccc',borderRadius:'4px',width:'100%',backgroundColor:'#f9f9f9'}}),isLoading&&/*#__PURE__*/_jsx(\"p\",{style:{color:'#2563eb',marginTop:'10px'},children:\"Import en cours...\"}),fileName&&!isLoading&&/*#__PURE__*/_jsxs(\"p\",{style:{color:'#16a34a',marginTop:'10px'},children:[\"Fichier import\\xE9 : \",fileName]})]});}export default CSVImporter;","map":{"version":3,"names":["React","useState","Papa","jsx","_jsx","jsxs","_jsxs","CSVImporter","_ref","onDataImported","isLoading","setIsLoading","fileName","setFileName","handleFileUpload","event","file","target","files","name","parse","header","skipEmptyLines","complete","results","console","log","data","transformedData","map","row","index","id","designation","cmu","modele","marque","longueur","infosComplementaires","numeroSerie","disponibilite","debutLocation","finLocationTheorique","rentreeLe","client","numeroOffre","notesLocation","prixHT","etat","motifMaintenance","certificat","dernierVGP","prochainVGP","error","alert","style","padding","backgroundColor","borderRadius","boxShadow","margin","children","color","marginBottom","type","accept","onChange","border","width","marginTop"],"sources":["C:/Users/kevin/Desktop/Apprentissage Python VScode/magiLoc/frontend/src/components/CSVImporter.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Papa from 'papaparse';\r\n\r\nfunction CSVImporter({ onDataImported }) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [fileName, setFileName] = useState('');\r\n\r\n  const handleFileUpload = (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    setFileName(file.name);\r\n    setIsLoading(true);\r\n\r\n    Papa.parse(file, {\r\n      header: true, // Utilise la première ligne comme en-têtes\r\n      skipEmptyLines: true,\r\n      complete: (results) => {\r\n        console.log('Données importées:', results.data);\r\n        \r\n        // Transformation des données pour correspondre à notre structure\r\n        const transformedData = results.data.map((row, index) => ({\r\n          id: index + 1,\r\n          designation: row['Désignation'] || row['DESIGNATION'] || '',\r\n          cmu: row['CMU'] || '',\r\n          modele: row['Modèle'] || row['MODELE'] || '',\r\n          marque: row['Marque'] || row['MARQUE'] || '',\r\n          longueur: row['Longeur Chaîne/Câble'] || row['LONGUEUR'] || '',\r\n          infosComplementaires: row['Infos Complémentaires'] || row['INFOS'] || '',\r\n          numeroSerie: row['Numéro de Série'] || row['N° SERIE'] || '',\r\n          disponibilite: row['Disponibilité'] || row['ETAT'] || 'Sur Parc',\r\n          debutLocation: row['Début Location'] || '',\r\n          finLocationTheorique: row['Fin de Location Théorique'] || '',\r\n          rentreeLe: row['Rentré Le'] || '',\r\n          client: row['Client'] || '',\r\n          numeroOffre: row['N° OFFRE'] || '',\r\n          notesLocation: row['NOTES LOCATION'] || '',\r\n          prixHT: row['Prix HT/J'] || '',\r\n          etat: row['État'] || 'Moyen',\r\n          motifMaintenance: row['Motif de Maintenance'] || '',\r\n          certificat: row['Certificat / V-TIC'] || '',\r\n          dernierVGP: row['Dernier VGP'] || '',\r\n          prochainVGP: row['Prochain VGP'] || ''\r\n        }));\r\n\r\n        onDataImported(transformedData);\r\n        setIsLoading(false);\r\n      },\r\n      error: (error) => {\r\n        console.error('Erreur lors de l\\'import:', error);\r\n        setIsLoading(false);\r\n        alert('Erreur lors de l\\'import du fichier CSV');\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '20px',\r\n      backgroundColor: 'white',\r\n      borderRadius: '8px',\r\n      boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\r\n      margin: '20px 0'\r\n    }}>\r\n      <h3>Importer votre fichier CSV</h3>\r\n      <p style={{ color: '#666', marginBottom: '15px' }}>\r\n        Sélectionnez votre fichier CSV pour importer tous vos équipements\r\n      </p>\r\n      \r\n      <input\r\n        type=\"file\"\r\n        accept=\".csv\"\r\n        onChange={handleFileUpload}\r\n        style={{\r\n          padding: '10px',\r\n          border: '2px dashed #ccc',\r\n          borderRadius: '4px',\r\n          width: '100%',\r\n          backgroundColor: '#f9f9f9'\r\n        }}\r\n      />\r\n      \r\n      {isLoading && (\r\n        <p style={{ color: '#2563eb', marginTop: '10px' }}>\r\n          Import en cours...\r\n        </p>\r\n      )}\r\n      \r\n      {fileName && !isLoading && (\r\n        <p style={{ color: '#16a34a', marginTop: '10px' }}>\r\n          Fichier importé : {fileName}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CSVImporter;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}